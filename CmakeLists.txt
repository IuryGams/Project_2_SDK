    cmake_minimum_required(VERSION 3.21)

    set(CMAKE_BUILD_TYPE "Release")
    set(CMAKE_TOOLCHAIN_FILE "C:/Dev/vcpkg/scripts/buildsystems/vcpkg.cmake")
    set(CMAKE_PREFIX_PATH "C:/Dev/vcpkg/installed/x64-windows")
    set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
    
    PROJECT(
        PROJECT_INTEGRATION
        
        LANGUAGES CXX
    )
    find_package(gRPC CONFIG REQUIRED)

    add_subdirectory(proto)
    add_subdirectory(tests)
    add_subdirectory(client)
    add_subdirectory(server)

    file(GLOB FILES_CPP ./source/*.cpp)
    file(GLOB SERVICES_FILES_CPP ./source/services/*.cpp)
    file(GLOB METER_FILES_CPP ./source/meters/*.cpp)

    add_library(
        ${PROJECT_NAME}_lib

        ${FILES_CPP}
        ${SERVICES_FILES_CPP}
        ${METER_FILES_CPP}
        ./server/server.cpp
        ./client/src/client.cpp
    )

    add_executable(
        ${PROJECT_NAME}

        ./main.cpp
    )

    target_include_directories(
        ${PROJECT_NAME}_lib

        PUBLIC
            ./include
            ./server
            ./include/services
            ./include/meters
            ./client/include
            ${CMAKE_CURRENT_BINARY_DIR}/proto
    )

    target_compile_features(
        ${PROJECT_NAME}_lib

        PUBLIC
            cxx_std_20
    )

    target_link_libraries(
        ${PROJECT_NAME}_lib

        PUBLIC
            protolib
    )

    target_link_libraries(
        ${PROJECT_NAME}

        PUBLIC
            ${PROJECT_NAME}_lib
    )